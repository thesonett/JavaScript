import { SentenceTransformer } from "./model.js";

async function main() {
  const sentenceTransformer = await SentenceTransformer.from_pretrained(
    "mixedbread-ai/mxbai-embed-large-v1",
  );
  const outputs = await sentenceTransformer.encode([
    "Hello world",
    "How are you guys doing?",
    "Today is Friday!",
  ]);

  // @ts-ignore
  console.log(outputs["last_hidden_state"]);

  // Tensor {
  //   dims: [ 3, 8, 1024 ],
  //   type: 'float32',
  //   data: Float32Array(24576) [
  //       0.46958014369010925,    0.5937920212745667,     0.313214510679245,
  //       -0.7687826156616211,  -0.15342962741851807, -0.006902366876602173,
  //        0.4466438889503479,    0.4976990222930908,    0.6671381592750549,
  //       0.40196216106414795, 0.0019395090639591217,    0.3616800308227539,
  //     -0.022035636007785797,    0.1544899344444275,   -0.9714016318321228,
  //       0.28011393547058105,   -0.4899875521659851,  -0.47940123081207275,
  //       -0.9930170178413391,   0.42359334230422974,  -0.35507452487945557,
  //        0.1600044220685959,    -1.298105001449585,   -0.5043018460273743,
  //      -0.39291372895240784,    0.7662463784217834,    0.5183582901954651,
  //      -0.04897893965244293,    0.8433000445365906,    0.8124200105667114,
  //      -0.17974981665611267,    0.0967910885810852,  -0.08397284150123596,
  //        -0.988907516002655,    -0.209872305393219,   -0.3331780731678009,
  //        0.7604691982269287,   -0.4840122163295746,  -0.46059566736221313,
  //        -0.770591139793396,    0.5980162620544434,   0.07308052480220795,
  //        0.4980742335319519,   -0.7585324645042419,    -1.245241403579712,
  //      -0.02400469034910202,   0.32044586539268494,    0.1860676407814026,
  //        0.7688491344451904,   -0.3379240036010742,  -0.05346515774726868,
  //        0.7336410880088806,    0.2059638500213623,    0.1298113763332367,
  //       -0.4468306601047516,   0.45381489396095276,   -1.0470331907272339,
  //       0.16282512247562408,   -0.5312275886535645,   0.18491412699222565,
  //       0.34955933690071106,    0.8887251019477844,    0.4603511393070221,
  //       -1.2919983863830566,   0.23518669605255127,    0.7537431120872498,
  //        0.1869429498910904,   -0.0264327023178339,    0.5966852307319641,
  //      0.030512012541294098,   -0.7189669609069824,    0.7214555740356445,
  //     -0.036089085042476654,   -0.6067982316017151,   -1.0775330066680908,
  //        0.7234665751457214,    0.2825022339820862,    0.2614058554172516,
  //      -0.12036071717739105,     0.544651448726654,  -0.07012958824634552,
  //        0.4695253074169159,  -0.03289877623319626,  -0.06253683567047119,
  //       -0.9431105852127075,   -0.4794307053089142,    0.4573529064655304,
  //        0.2784995138645172,   -0.3720255196094513,  -0.27437257766723633,
  //         0.568558394908905,    0.6955466866493225,  -0.10351471602916718,
  //        0.0354219526052475,    0.9784052968025208,      0.82120281457901,
  //        -0.454928994178772,   0.36347103118896484,   -0.6430990099906921,
  //     -0.017216553911566734,
  //     ... 24476 more items
  //   ],
  //   size: 24576
  // }

  return outputs;
}

main();
